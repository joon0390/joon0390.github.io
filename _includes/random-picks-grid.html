{% assign categories = site.data.navigation['sidebar-category'][0].children %}
{% if categories %}
<section class="random-picks-grid">
  <h3 class="archive__subtitle">Category Picks</h3>
  <div class="random-picks-grid__wrapper">
    {% for cat in categories %}
      {% assign cat_title = cat.title %}
      {% assign cat_slug = cat_title | slugify %}
      {% assign cat_posts = site.categories[cat_title] %}
      {% if cat_posts == null %}
        {% assign cat_posts = site.categories[cat_slug] %}
      {% endif %}
      {% if cat_posts and cat_posts.size > 0 %}
        {% assign random_post = cat_posts | sample: 1 | first %}
        <article class="random-picks-grid__card">
          <a href="{{ random_post.url | relative_url }}" class="random-picks-grid__image-link">
            {% if random_post.header and random_post.header.overlay_image %}
              <img src="{{ random_post.header.overlay_image | relative_url }}" alt="{{ random_post.title }}" loading="lazy" />
            {% elsif random_post.image %}
              <img src="{{ random_post.image | relative_url }}" alt="{{ random_post.title }}" loading="lazy" />
            {% else %}
              <div class="random-picks-grid__placeholder">
                <span>{{ cat_title }}</span>
              </div>
            {% endif %}
          </a>
          <div class="random-picks-grid__body">
            <div class="random-picks-grid__category">{{ cat_title }}</div>
            <a href="{{ random_post.url | relative_url }}" class="random-picks-grid__title">{{ random_post.title }}</a>
            {% if random_post.excerpt %}
              <p class="random-picks-grid__excerpt">{{ random_post.excerpt | strip_html | truncate: 120 }}</p>
            {% endif %}
          </div>
        </article>
      {% endif %}
    {% endfor %}
  </div>
</section>
{% endif %}
